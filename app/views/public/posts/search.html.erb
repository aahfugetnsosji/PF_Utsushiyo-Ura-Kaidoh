<div class="container">
  <div class="row">
    <div class="col">
      <h1>
        検索結果一覧
        <% if @posts.count == 0 %>
          <span></span>
        <% else %>
          <span>
            <%= @posts.count %>件がヒット
          </span>
        <% end %>
      </h1>
    </div>
  </div>
  
  <div class="row">
    <div class="col-md-3">
      <!--キーワード検索窓-->
      <div class="row">
        <%= form_tag(search_path,:method => 'get') do %>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>キーワード検索</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <%= text_field_tag :keyword %><br>
                  <%= submit_tag '検索', :body => nil %>
                </td>
              </tr>
            </tbody>
          </table>
        <% end %>
      </div>
      
      <!--タグ検索窓-->
      <div class="row">
        <%= form_tag posts_path, method: :get do %>
          <table class="table table-bordered">
            <thead>
              <tr>
                <th>タグ検索</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  <%= select_tag :tag_id, options_from_collection_for_select(Tag.all, :id, :name, params[:tag_id]), { prompt: "--選択してください--" } %><br>
                  <%= submit_tag '検索' %>
                </td>
              </tr>
            </tbody>
          </table>
        <% end %>
      </div>
    </div>
    
    <div class="col-md-8">
      <div class="card-deck">
        <% @posts.each do |post| %>
          <a href="/posts/<%= post.id %>" class="card text-dark border-dark" style="width: 20%;">
            <%= image_tag post.get_image(200, 200), class: "card-img-top" %>
            <div class="card-body">
              <h6 class="card-title">
                <%= post.title %>
              </h6>
              <p class="card-text">
                <%= safe_join(post.body.split("\n"),tag(:br)) %>
              </p>
              <p class="card-text">
                <%= post.user.name %>
                <%= l post.created_at, format: :short %>
              </p>
            </div>
          </a>
        <% end %>
      </div>
    </div>
  </div>
  
  <% if @posts.count == 0 %>
    <div class"row">
      <div class="col">
        <p>検索結果がありませんでした。</p>
      </div>
    </div>
  <% end %>
</div>